<div class="modal-dialog">
  <div class="modal-content">
    <%= form_with(model: @icon, local: true) do |form| %>

      <div class="input-group" style="padding:15px">
          <label class="input-group-btn">
              <span class="btn btn-primary">
                プロフィール写真
                   <%= form.file_field :icon, type: "file", style: "display:none;" %>
              </span>
          </label>
          <input type="text" class="form-control" readonly="" style="background-color:white">
      </div>
      <%= form.submit class: "btn btn-default", style: "margin-bottom:20px;"  %>
    <% end %>
  </div>
</div>

<script>
   $(document).on('change', ':file', function() {
       var input = $(this),
       numFiles = input.get(0).files ? input.get(0).files.length : 1,
       label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
       input.parent().parent().next(':text').val(label);
   });
</script>
